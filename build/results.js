(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.element;(0,t.registerBlockType)("srm/job-results",{title:"Job Results",category:"widgets",edit:()=>{const[t,o]=(0,n.useState)([]),l=()=>{const e=JSON.parse(localStorage.getItem("jobFilters"))||{},t=new FormData;t.append("action","sr_job_filter_jobs"),t.append("sr-job-filter-nonce",sr_job_ajax_object.sr_job_filter_nonce),e.location&&t.append("location",e.location),e.position&&t.append("position",e.position),e.type&&t.append("type",e.type),fetch(sr_job_ajax_object.ajax_url,{method:"POST",body:t}).then((e=>e.json())).then((e=>o(e)))};return(0,n.useEffect)((()=>{l();const e=()=>{l()};return document.addEventListener("jobFiltersUpdated",e),()=>{document.removeEventListener("jobFiltersUpdated",e)}}),[]),(0,e.createElement)("div",{className:"job-results"},t.length>0?(0,e.createElement)("ul",null,t.map((t=>(0,e.createElement)("li",{key:t.id},(0,e.createElement)("h4",null,t.title),(0,e.createElement)("p",{dangerouslySetInnerHTML:{__html:t.excerpt}}),(0,e.createElement)("a",{href:t.apply_url,className:"apply-link"},"Apply"))))):(0,e.createElement)("p",null,"No jobs found."))},save:()=>null})})();